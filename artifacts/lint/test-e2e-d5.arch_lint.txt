============================================================
arch_lint Report (Scoped)
============================================================
Contract: test-e2e-d5
Timestamp: 2026-01-20T10:40:00.181373+00:00
Lock Hash: 17aff142a29634532286313090b8fe1af1fdcded4f741ac63444dc7e9fbf21d2
Lock Verified: True
Tool: tools/arch_lint v2.35
Exit Code: 1
Errors: 0
Warnings: 0

Base Commit: 727f70d
Head Commit: e20716b7d83a9623b1742d1d1a25c0b2dc57b405
Files Linted: 7

WATERMARK: lock=17aff142a29634532286313090b8fe1af1fdcded4f741ac63444dc7e9fbf21d2 alg=sha256 ts=2026-01-20T10:40:00.181373+00:00

============================================================
FILES MANIFEST
============================================================
  tests/test_enforcement.py
  tools/ck3lens_mcp/ck3lens/policy/__init__.py
  tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py
  tools/ck3lens_mcp/ck3lens/policy/enforcement.py
  tools/ck3lens_mcp/ck3lens/policy/types.py
  tools/ck3lens_mcp/ck3lens/unified_tools.py
  tools/ck3lens_mcp/server.py

============================================================
STDOUT
============================================================
Scanned: 7 files under C:\Users\nateb\Documents\CK3 Mod Project 1.18\ck3raven
arch_lint v2.35
Errors: 510  Warnings: 529

ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:5:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    Implements the CK3LENS_POLICY_ARCHITECTURE.md specification.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:6:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:6:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:7:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Core Invariants:
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:7:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    Core Invariants:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:8:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    1. Mods must be ingested into the database to be visible
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:8:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    1. Mods must be ingested into the database to be visible
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:9:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    2. Only mods in the active playset are visible by default
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:9:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    2. Only mods in the active playset are visible by default
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:10:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    3. Only active local mods are mutable
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:10:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    3. Only active local mods are mutable
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:11:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    4. Vanilla and workshop mods are always immutable
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:11:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    4. Vanilla and workshop mods are always immutable
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:12:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    5. Filesystem access never expands mod discovery
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:12:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    5. Filesystem access never expands mod discovery
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:12:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    5. Filesystem access never expands mod discovery
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:13:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    6. ck3lens cannot write Python except to the WIP workspace
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:13:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    6. ck3lens cannot write Python except to the WIP workspace
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:13:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    6. ck3lens cannot write Python except to the WIP workspace
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:14:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    7. ck3raven source is read-only (no writes even with contract)
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:14:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    7. ck3raven source is read-only (no writes even with contract)
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:14:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    7. ck3raven source is read-only (no writes even with contract)
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:15:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:16:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    CRITICAL: ck3lens agents can ONLY edit CK3 mod files in configured local_mods.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:17:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    They CANNOT edit Python code, core ck3raven code, or any infrastructure files
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:18:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    (except Python in the WIP workspace for temporary scripts).
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:19:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    """
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:20:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    from __future__ import annotations
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:113:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    Classify a path into its scope domain.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:113:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    Classify a path into its scope domain.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:114:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:114:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:115:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    Returns the ScopeDomain for structural classification only (NOT permissions).
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:115:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    Returns the ScopeDomain for structural classification only (NOT permissions).
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:116:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:116:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:118:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    """
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:118:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    """
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:119:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    if isinstance(path, str):
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:119:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    if isinstance(path, str):
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:120:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    path = Path(path)
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:120:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    path = Path(path)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:121:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:121:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
ERROR ORACLE-02 tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:142:4 — Permission branching / oracle-style gating detected in if-condition.
    if local_mods_folder:
    -> Remove permission pre-checks; use canonical boundary gates at mutation sites.
ERROR CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:176:0 [enforce_ck3lens_file_restrictions] — Concept explosion: Lens-like noun 'enforce_ck3lens_file_restrictions' overlaps Session/WorldAdapter/handles.
    def enforce_ck3lens_file_restrictions(
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:179:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    violations: list[Violation],
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:180:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    summary: dict[str, Any],
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:181:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    ) -> None:
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:182:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    """
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:183:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    Enforce: ck3lens agents can ONLY edit CK3 mod files (plus Python in WIP).
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:184:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:185:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    Rule: no_python_editing (except WIP), local_mods_only
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:186:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    Severity: ERROR (HARD GATE)
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:187:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:374:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    extra = scope["mod_ids"] - ctx.active_mod_ids
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:374:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    extra = scope["mod_ids"] - ctx.active_mod_ids
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:375:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    out_of_scope_calls.append({
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:375:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    out_of_scope_calls.append({
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:376:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "tool": call.name,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:376:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "tool": call.name,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:377:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "reason": "mod_ids_outside_active_playset",
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:377:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "reason": "mod_ids_outside_active_playset",
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:378:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "extra_mods": list(extra),
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:378:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "extra_mods": list(extra),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:379:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    })
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:379:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    })
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:379:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    })
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:380:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:380:1 — Path oracle: mod root — matched pattern 'mod%root'.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:380:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:380:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:381:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    # roots must be subset of allowed roots
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:381:1 — Path oracle: mod root — matched pattern 'mod%root'.
    # roots must be subset of allowed roots
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:381:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    # roots must be subset of allowed roots
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:381:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    # roots must be subset of allowed roots
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:382:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    if ctx.active_roots is not None and scope["roots"]:
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:382:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    if ctx.active_roots is not None and scope["roots"]:
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:383:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    allowed_roots = ctx.active_roots.copy()
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:384:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    if ctx.vanilla_root:
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:385:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    allowed_roots.add(ctx.vanilla_root)
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:386:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    if not scope["roots"].issubset(allowed_roots):
ERROR CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:774:0 [validate_ck3lens_rules] — Concept explosion: Lens-like noun 'validate_ck3lens_rules' overlaps Session/WorldAdapter/handles.
    def validate_ck3lens_rules(
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:13:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    Key Principles:
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:252:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    path: str,
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:253:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    contract_paths: list[str],
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:254:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    ) -> bool:
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:255:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    """
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:256:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    Check if a path is within the contract's allowed scope.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:257:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:258:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:259:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:260:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    Args:
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:310:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    The `domain` field is the resolved PathDomain from WorldAdapter.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:311:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    Enforcement uses this to make decisions - it does NOT re-check paths.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:312:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:313:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    Domain classification happens in WorldAdapter.resolve():
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:314:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    - WIP → always allowed
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:328:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:329:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    # Context (varies by operation type)
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:330:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    target_path: Optional[str] = None      # Canonical address (e.g., "wip:/test.py", "mod:MyMod/file.txt")
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:331:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    target_paths: List[str] = field(default_factory=list)  # Multiple paths
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:332:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    mod_name: Optional[str] = None         # For ck3lens mod ops (from resolution)
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:333:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    rel_path: Optional[str] = None         # For ck3lens mod ops (from resolution)
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:334:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    command: Optional[str] = None          # For shell ops
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:335:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
ERROR FORBIDDEN_PATH_API tools/ck3lens_mcp/ck3lens/policy/enforcement.py:426:33 — Forbidden path API '.relative_to(' outside canonical modules.
    rel_path = path.resolve().relative_to(repo_root.resolve())
    -> Route through WorldAdapter.
ERROR ORACLE-02 tools/ck3lens_mcp/ck3lens/policy/enforcement.py:581:8 — Permission branching / oracle-style gating detected in if-condition.
    if allowed_paths:
    -> Remove permission pre-checks; use canonical boundary gates at mutation sites.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:795:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    )
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:821:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    )
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:892:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    contract_id=contract.contract_id,
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:893:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    )
ERROR ORACLE-02 tools/ck3lens_mcp/ck3lens/policy/enforcement.py:900:8 — Permission branching / oracle-style gating detected in if-condition.
    if allowed_paths and not check_path_in_contract_scope(staged_file, allowed_paths):
    -> Remove permission pre-checks; use canonical boundary gates at mutation sites.
ERROR CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/enforcement.py:925:0 [_enforce_ck3lens_write] — Concept explosion: Lens-like noun '_enforce_ck3lens_write' overlaps Session/WorldAdapter/handles.
    def _enforce_ck3lens_write(
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:995:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    )
ERROR BANNED_ORACLE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1040:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    required_contract=True,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1250:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    token_id=result.token_id,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1251:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    required_token_type=result.required_token_type,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1252:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    target_path=request.target_path,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1253:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    target_paths=request.target_paths if request.target_paths else None,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1254:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    mod_name=request.mod_name,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1255:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    command=command,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1256:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    branch=request.branch_name,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1257:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    staged_files=staged_files,
ERROR CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/types.py:60:0 [CK3LensTokenType] — Concept explosion: Lens-like noun 'CK3LensTokenType' overlaps Session/WorldAdapter/handles.
    class CK3LensTokenType(str, Enum):
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
ERROR CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/types.py:75:0 [CK3LENS_TOKEN_TTLS] — Concept explosion: Lens-like noun 'CK3LENS_TOKEN_TTLS' overlaps Session/WorldAdapter/handles.
    CK3LENS_TOKEN_TTLS = {
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
ERROR CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/types.py:236:0 [get_ck3lens_wip_path] — Concept explosion: Lens-like noun 'get_ck3lens_wip_path' overlaps Session/WorldAdapter/handles.
    def get_ck3lens_wip_path() -> Path:
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:337:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    active_roots: Optional[set[str]] = None
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:338:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    vanilla_root: Optional[str] = None
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:339:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:372:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - vanilla_version_id
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:372:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - vanilla_version_id
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:373:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - active_mod_ids
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:373:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - active_mod_ids
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:374:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - active_roots
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:374:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - active_roots
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:375:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - vanilla_root
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:375:1 — Path oracle: mod root — matched pattern 'mod%root'.
    - vanilla_root
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:375:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - vanilla_root
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:375:1 — Path oracle: mod root (near-match) — near-window match ['mod', 'root'] within 6 tokens.
    - vanilla_root
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:376:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - local_mods
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:376:1 — Path oracle: mod root — matched pattern 'mod%root'.
    - local_mods
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:376:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - local_mods
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:376:1 — Path oracle: mod root (near-match) — near-window match ['mod', 'root'] within 6 tokens.
    - local_mods
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:377:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - ck3raven_root
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:377:1 — Path oracle: mod root — matched pattern 'mod%root'.
    - ck3raven_root
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:377:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - ck3raven_root
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:377:1 — Path oracle: mod root (near-match) — near-window match ['mod', 'root'] within 6 tokens.
    - ck3raven_root
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:378:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:378:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:386:1 — Path oracle: mod root — matched pattern 'mod%root'.
    if scope.get("active_mod_ids") is not None:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:387:1 — Path oracle: mod root — matched pattern 'mod%root'.
    self.active_mod_ids = scope["active_mod_ids"]
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:388:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    if scope.get("active_roots") is not None:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:388:1 — Path oracle: mod root — matched pattern 'mod%root'.
    if scope.get("active_roots") is not None:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:389:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    self.active_roots = scope["active_roots"]
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:389:1 — Path oracle: mod root — matched pattern 'mod%root'.
    self.active_roots = scope["active_roots"]
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:390:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    if scope.get("vanilla_root") is not None:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:390:1 — Path oracle: mod root — matched pattern 'mod%root'.
    if scope.get("vanilla_root") is not None:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:391:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    self.vanilla_root = scope["vanilla_root"]
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:391:1 — Path oracle: mod root — matched pattern 'mod%root'.
    self.vanilla_root = scope["vanilla_root"]
ERROR ORACLE-02 tools/ck3lens_mcp/ck3lens/policy/types.py:392:8 — Permission branching / oracle-style gating detected in if-condition.
    if scope.get("local_mods_folder") is not None:
    -> Remove permission pre-checks; use canonical boundary gates at mutation sites.
ERROR FORBIDDEN_PATH_API tools/ck3lens_mcp/ck3lens/unified_tools.py:1316:36 — Forbidden path API '.relative_to(' outside canonical modules.
    "relpath": str(f.relative_to(target)),
    -> Route through WorldAdapter.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1342:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    Modes:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1343:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    - partial_patch: Creates zzz_[mod]_[original_name].txt (for adding/modifying specific units)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1344:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    - full_replace: Creates [original_name].txt (full replacement, last-wins)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1345:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1346:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    NOTE: This function computes paths and delegates to _file_write.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1347:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    Enforcement happens via the normal _file_write path.
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1500:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    if deleted:
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1501:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    # For deletion, still use enqueue but the file won't exist
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1502:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    result = daemon.enqueue_files(
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1503:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    paths=[file_path],
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1504:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    mod_name=mod_name,
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1505:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    priority="high",
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1506:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    reason="file_deleted",
ERROR BANNED_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1507:1 — Path oracle: mod paths (near-match) — near-window match ['mod', 'paths'] within 8 tokens.
    )
ERROR MUTATOR-03 tools/ck3lens_mcp/ck3lens/unified_tools.py:1551:0 — Subprocess/system call detected outside builder/write-handle modules.
    subprocess.Popen(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/ck3lens/unified_tools.py:1551:12 [subprocess.Popen] — Raw I/O call 'subprocess.Popen(...)' outside allowed modules.
    subprocess.Popen(
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-03 tools/ck3lens_mcp/ck3lens/unified_tools.py:1560:0 — Subprocess/system call detected outside builder/write-handle modules.
    subprocess.Popen(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/ck3lens/unified_tools.py:1560:12 [subprocess.Popen] — Raw I/O call 'subprocess.Popen(...)' outside allowed modules.
    subprocess.Popen(
    -> Route I/O through handles minted by WorldAdapter.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1610:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=contents    -> Get folder contents from database (path required)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1611:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=top_level   -> Get top-level folders in active playset
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1612:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=mod_folders -> Get folders in specific mod (content_version_id required)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1613:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1614:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    CANONICAL: Uses cvids (list of content_version_ids from session.mods[]) instead of playset_id.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1615:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    The caller should pass cvids=[m.cvid for m in session.mods if m.cvid].
ERROR MUTATOR-03 tools/ck3lens_mcp/ck3lens/unified_tools.py:1859:0 — Subprocess/system call detected outside builder/write-handle modules.
    result = subprocess.run(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/ck3lens/unified_tools.py:1859:17 [subprocess.run] — Raw I/O call 'subprocess.run(...)' outside allowed modules.
    result = subprocess.run(
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-03 tools/ck3lens_mcp/ck3lens/unified_tools.py:2118:0 — Subprocess/system call detected outside builder/write-handle modules.
    result_obj = subprocess.run(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/ck3lens/unified_tools.py:2118:33 [subprocess.run] — Raw I/O call 'subprocess.run(...)' outside allowed modules.
    result_obj = subprocess.run(
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-03 tools/ck3lens_mcp/ck3lens/unified_tools.py:2138:0 — Subprocess/system call detected outside builder/write-handle modules.
    result_obj = subprocess.run(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/ck3lens/unified_tools.py:2138:33 [subprocess.run] — Raw I/O call 'subprocess.run(...)' outside allowed modules.
    result_obj = subprocess.run(
    -> Route I/O through handles minted by WorldAdapter.
ERROR FORBIDDEN_PATH_API tools/ck3lens_mcp/server.py:39:10 — Path(...).resolve() used outside canonical modules. Use WorldAdapter.resolve().
    exe = Path(sys.executable).resolve()
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:344:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    active_mod_ids = set()
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:345:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    active_roots = set()
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:346:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:347:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    # Read mods array (new format)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:348:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    for mod in data.get("mods", []):
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:349:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    if not mod.get("enabled", True):
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:357:1 — Path oracle: mod root — matched pattern 'mod%root'.
    active_roots.add(str(Path(path).expanduser()))
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:358:1 — Path oracle: mod root — matched pattern 'mod%root'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:360:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    vanilla_config = data.get("vanilla", {})
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:361:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    vanilla_root = vanilla_config.get("path", "C:/Program Files (x86)/Steam/steamapps/common/Crusader Kings III/game")
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:375:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "playset_name": data.get("playset_name", "JSON Playset"),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:376:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "active_mod_ids": active_mod_ids,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:377:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "active_roots": active_roots,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:378:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "vanilla_version_id": None,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:378:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "vanilla_version_id": None,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:379:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "vanilla_root": str(Path(vanilla_root).expanduser()),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:379:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "vanilla_root": str(Path(vanilla_root).expanduser()),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:380:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "source": "json",
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:380:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "source": "json",
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:381:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "file_path": str(playset_file),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:405:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:406:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Returns dict with:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:406:1 — Path oracle: mod root — matched pattern 'mod%root'.
    Returns dict with:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:406:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    Returns dict with:
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:406:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    Returns dict with:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:407:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    playset_id: None (JSON-based, no DB ID)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:407:1 — Path oracle: mod root — matched pattern 'mod%root'.
    playset_id: None (JSON-based, no DB ID)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:407:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    playset_id: None (JSON-based, no DB ID)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:407:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    playset_id: None (JSON-based, no DB ID)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:408:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    playset_name: Human-readable name
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:408:1 — Path oracle: mod root — matched pattern 'mod%root'.
    playset_name: Human-readable name
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:408:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    playset_name: Human-readable name
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:408:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    playset_name: Human-readable name
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:409:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    active_mod_ids: Set of workshop IDs for mods in playset
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:409:1 — Path oracle: mod root — matched pattern 'mod%root'.
    active_mod_ids: Set of workshop IDs for mods in playset
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:409:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    active_mod_ids: Set of workshop IDs for mods in playset
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:409:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    active_mod_ids: Set of workshop IDs for mods in playset
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:410:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    active_roots: Set of filesystem root paths for mods
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:410:1 — Path oracle: mod root — matched pattern 'mod%root'.
    active_roots: Set of filesystem root paths for mods
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:410:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    active_roots: Set of filesystem root paths for mods
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:410:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    active_roots: Set of filesystem root paths for mods
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:411:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    vanilla_version_id: None (unused)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:411:1 — Path oracle: mod root — matched pattern 'mod%root'.
    vanilla_version_id: None (unused)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:411:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    vanilla_version_id: None (unused)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:411:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    vanilla_version_id: None (unused)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:412:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    vanilla_root: Path to vanilla game files
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:412:1 — Path oracle: mod root — matched pattern 'mod%root'.
    vanilla_root: Path to vanilla game files
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:412:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    vanilla_root: Path to vanilla game files
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:412:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    vanilla_root: Path to vanilla game files
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:413:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    source: "json" or "none"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:413:1 — Path oracle: mod root — matched pattern 'mod%root'.
    source: "json" or "none"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:413:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    source: "json" or "none"
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:413:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    source: "json" or "none"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:414:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    agent_briefing: Dict with agent instructions (if available)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:441:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "playset_name": None,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:442:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "active_mod_ids": set(),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:443:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "active_roots": set(),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:444:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "vanilla_version_id": None,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:445:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "vanilla_root": None,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:446:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "source": "none",
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:596:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Internal session initialization - called by ck3_get_mode_instructions.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:596:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    Internal session initialization - called by ck3_get_mode_instructions.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:597:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:597:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:597:1 — Oracle: is_editable pattern — matched pattern 'is%editable'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:598:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    CANONICAL MODEL:
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:598:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    CANONICAL MODEL:
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:598:1 — Oracle: is_editable pattern — matched pattern 'is%editable'.
    CANONICAL MODEL:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:599:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - Session is loaded from active playset via load_config()
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:599:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - Session is loaded from active playset via load_config()
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:599:1 — Oracle: is_editable pattern — matched pattern 'is%editable'.
    - Session is loaded from active playset via load_config()
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:600:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - mods[] contains all mods from playset
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:600:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    - mods[] contains all mods from playset
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:600:1 — Oracle: is_editable pattern — matched pattern 'is%editable'.
    - mods[] contains all mods from playset
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:603:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:603:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:603:1 — Oracle: is_editable pattern — matched pattern 'is%editable'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:604:1 — Oracle: is_editable pattern — matched pattern 'is%editable'.
    Returns session info dict.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:605:1 — Oracle: is_editable pattern — matched pattern 'is%editable'.
    """
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:631:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:632:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    # CANONICAL: Get playset info from session - no database lookup needed
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:633:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    # Vanilla is mods[0], playset name comes from session config
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:634:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    playset_name = getattr(_session, "playset_name", "Active Playset")
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:635:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    mod_count = len(_session.mods) if hasattr(_session, "mods") else 0
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:636:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:637:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    # Check database health
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:638:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    db_status = _check_db_health(_db.conn)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:900:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
    """
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:901:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
    Flexible database cleanup tool for surgical deletion of indexed data.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:902:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:903:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
    Mode-aware behavior:
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:904:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
    - ck3lens mode: Can delete playset/mod data for re-ingestion
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:905:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
    - ck3raven-dev mode: Full access for schema changes and debugging
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:906:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:907:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
    Use this to clear cached/derived data when:
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:908:1 — Oracle: can_delete pattern — matched pattern 'can%delete'.
    - Mods have been updated from Steam and need re-ingestion
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1125:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute(f"DELETE FROM files {where}", params)
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1162:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute(f"DELETE FROM playset_mods WHERE content_version_id IN ({placeholders})", cv_ids)
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1166:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute(f"DELETE FROM files WHERE content_version_id IN ({placeholders})", cv_ids)
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1170:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute(f"DELETE FROM content_versions {where}", params)
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1174:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute("DELETE FROM mod_packages WHERE mod_package_id NOT IN (SELECT DISTINCT mod_package_id FROM content_versions WHERE mod_package_id IS NOT NULL)")
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1215:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute(f"DELETE FROM {table}")
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1238:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute("DELETE FROM playset_mods")
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1240:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute("DELETE FROM playsets")
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1260:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute("DELETE FROM build_lock")
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1261:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute("DELETE FROM builder_steps")
    -> Route DB writes through builder handles only.
ERROR MUTATOR-01 tools/ck3lens_mcp/server.py:1263:0 — SQL mutator detected outside builder/write-handle modules.
    cur.execute("DELETE FROM builder_runs")
    -> Route DB writes through builder handles only.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1448:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Unified conflict detection for the active playset.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1449:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1450:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Commands:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1451:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1452:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=symbols  → Find symbols defined by multiple mods (default)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1513:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    if hasattr(m, 'cvid') and m.cvid is not None
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1514:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    )
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1515:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1516:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    if not cvids:
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1517:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    return {"error": "No mods in session.mods[] - no active playset?"}
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1518:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1519:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    if command == "symbols":
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1520:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    # Use the internal method that was powering the deleted tools
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1521:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    result = db._get_symbol_conflicts_internal(
ERROR BANNED_TERM tools/ck3lens_mcp/server.py:1522:12 [visible_cvids] — Banned term 'visible_cvids' used.
    visible_cvids=cvids,
    -> Remove/rename to canonical architecture.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1719:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    path: File path (for get/read from filesystem)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1720:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    mod_name: Target for file operations. Can be:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1721:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - "wip" → WIP workspace (~/.ck3raven/wip/) - always writable
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1722:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - "vanilla" → Vanilla game files (read-only)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:1722:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    - "vanilla" → Vanilla game files (read-only)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1724:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    rel_path: Relative path within target
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:1724:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    rel_path: Relative path within target
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1725:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    include_ast: Include parsed AST (for get)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1726:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    content: File content (for write)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1727:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    start_line: Start line for read (1-indexed)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1798:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    """
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1799:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    Unified folder operations tool.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1886:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1886:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1887:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=get        ? Get active playset info
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1887:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=get        ? Get active playset info
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1888:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=list       ? List all playsets
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1888:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=list       ? List all playsets
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1889:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=switch     ? Switch to different playset (playset_name required)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1889:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=switch     ? Switch to different playset (playset_name required)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1890:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=mods       ? Get mods in active playset
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1890:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=mods       ? Get mods in active playset
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1891:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    command=add_mod    ? Add mod to playset (mod_name required)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1891:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=add_mod    ? Add mod to playset (mod_name required)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1892:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=remove_mod ? Remove mod from playset (mod_name required)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1893:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=reorder    ? Change mod load order (mod_name, new_position required)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1894:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    command=create     ? Create new playset (name required)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1932:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    if f.name.endswith(".schema.json") or f.name == "playset_manifest.json" or f.name == "sub_agent_templates.json":
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1933:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    continue
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1934:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    try:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1935:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    data = json.loads(f.read_text(encoding="utf-8-sig"))
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1936:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    enabled_mods = [m for m in data.get("mods", []) if m.get("enabled", True)]
ERROR BANNED_TERM tools/ck3lens_mcp/server.py:1936:16 [enabled_mods] — Banned term 'enabled_mods' used.
    enabled_mods = [m for m in data.get("mods", []) if m.get("enabled", True)]
    -> Remove/rename to canonical architecture.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1937:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    playsets.append({
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1938:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "filename": f.name,
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1938:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "filename": f.name,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1939:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "name": data.get("playset_name", f.stem),
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1939:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "name": data.get("playset_name", f.stem),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1940:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "description": data.get("description", ""),
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1940:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "description": data.get("description", ""),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1941:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "mod_count": len(enabled_mods),
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1941:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "mod_count": len(enabled_mods),
ERROR BANNED_TERM tools/ck3lens_mcp/server.py:1941:37 [enabled_mods] — Banned term 'enabled_mods' used.
    "mod_count": len(enabled_mods),
    -> Remove/rename to canonical architecture.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1942:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "is_active": f.name == manifest_active,
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1942:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "is_active": f.name == manifest_active,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1943:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    })
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1943:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    })
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1944:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    except Exception as e:
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1944:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    except Exception as e:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:1945:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    playsets.append({
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:1945:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    playsets.append({
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2074:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "mod_count": len(new_scope.get("active_mod_ids", set())),
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:2074:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    "mod_count": len(new_scope.get("active_mod_ids", set())),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2075:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    }
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:2075:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    }
ERROR MUTATOR-03 tools/ck3lens_mcp/server.py:2115:0 — Subprocess/system call detected outside builder/write-handle modules.
    subprocess.Popen(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:2115:24 [subprocess.Popen] — Raw I/O call 'subprocess.Popen(...)' outside allowed modules.
    subprocess.Popen(
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-03 tools/ck3lens_mcp/server.py:2124:0 — Subprocess/system call detected outside builder/write-handle modules.
    subprocess.Popen(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:2124:24 [subprocess.Popen] — Raw I/O call 'subprocess.Popen(...)' outside allowed modules.
    subprocess.Popen(
    -> Route I/O through handles minted by WorldAdapter.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2178:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "playset_name": scope.get("playset_name"),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2179:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "source": scope.get("source"),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2180:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "mod_count": len(scope.get("active_mod_ids", set())),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2181:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "has_agent_briefing": bool(scope.get("agent_briefing")),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2181:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "has_agent_briefing": bool(scope.get("agent_briefing")),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2182:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "vanilla_root": scope.get("vanilla_root"),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2182:1 — Path oracle: mod root — matched pattern 'mod%root'.
    "vanilla_root": scope.get("vanilla_root"),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2183:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    }
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2183:1 — Path oracle: mod root — matched pattern 'mod%root'.
    }
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2184:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2184:1 — Path oracle: mod root — matched pattern 'mod%root'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2194:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "success": True,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2195:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "playset_name": scope.get("playset_name"),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2196:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "enabled_count": len(enabled),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2197:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "disabled_count": len(disabled),
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2198:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "mods": enabled[:limit] if limit else enabled,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2199:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "truncated": limit is not None and len(enabled) > limit,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2200:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    }
ERROR FORBIDDEN_PATH_API tools/ck3lens_mcp/server.py:2234:27 — Path(...).resolve() used outside canonical modules. Use WorldAdapter.resolve().
    mod_path = str(Path(mod_name).resolve())  # Needed for absolute path
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2305:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "enabled": True,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2306:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "is_compatch": False,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2307:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    "notes": f"Added by ck3_playset add_mod on {datetime.now().isoformat()}"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2308:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    }
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2309:1 — Parallel truth: enabled mods — matched pattern 'enabled%mods'.
    mods_list.append(new_mod_entry)
ERROR IO-01 tools/ck3lens_mcp/server.py:2686:8 [shutil.copy2] — Raw I/O call 'shutil.copy2(...)' outside allowed modules.
    shutil.copy2(launcher_db, backup_path)
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-02 tools/ck3lens_mcp/server.py:2778:0 — Filesystem write mutator detected outside builder/write-handle modules.
    with open(f, 'r', encoding='utf-8') as fp:
    -> Route file writes through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:2778:21 [open] — Raw I/O call 'open(...)' outside allowed modules.
    with open(f, 'r', encoding='utf-8') as fp:
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-02 tools/ck3lens_mcp/server.py:2842:0 — Filesystem write mutator detected outside builder/write-handle modules.
    with open(playset_file, 'w', encoding='utf-8') as fp:
    -> Route file writes through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:2842:17 [open] — Raw I/O call 'open(...)' outside allowed modules.
    with open(playset_file, 'w', encoding='utf-8') as fp:
    -> Route I/O through handles minted by WorldAdapter.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2920:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    pass
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2921:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:2922:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    # Check for mods with missing paths
ERROR IO-01 tools/ck3lens_mcp/server.py:3218:16 [shutil.move] — Raw I/O call 'shutil.move(...)' outside allowed modules.
    shutil.move(str(f), str(archive_dir / f.name))
    -> Route I/O through handles minted by WorldAdapter.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3263:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3264:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    This is the ONLY safe way for agents to run shell commands.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3265:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    All commands are evaluated against the policy engine:
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3266:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3267:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    - Safe commands (cat, git status, etc.) ? Allowed automatically
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3268:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    - Risky commands (rm *.py, git push) ? Require approval token
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3332:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    if working_dir:
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3333:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    resolution = normalize_path_input(world, path=working_dir)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3334:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    if not resolution.found:
ERROR MUTATOR-03 tools/ck3lens_mcp/server.py:3660:0 — Subprocess/system call detected outside builder/write-handle modules.
    proc = subprocess.run(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:3660:19 [subprocess.run] — Raw I/O call 'subprocess.run(...)' outside allowed modules.
    proc = subprocess.run(
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-03 tools/ck3lens_mcp/server.py:3671:0 — Subprocess/system call detected outside builder/write-handle modules.
    proc = subprocess.run(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:3671:19 [subprocess.run] — Raw I/O call 'subprocess.run(...)' outside allowed modules.
    proc = subprocess.run(
    -> Route I/O through handles minted by WorldAdapter.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3753:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    Args:
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3754:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    command: Action to perform
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3755:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    token_type: Type of token to request (for request)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3756:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    reason: Why this token is needed (for request)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3757:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    path_patterns: Allowed paths (for request)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3758:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    command_patterns: Allowed commands (for request)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3759:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    ttl_minutes: Override TTL (for request)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:3760:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    token_id: Token to validate/revoke
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:3928:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    {
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:3929:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    "query": str,
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:3930:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    "symbols": {definitions, references_by_mod},
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:3931:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    "content": {line-by-line matches},
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:3932:1 — Path oracle: mod paths — matched pattern 'mod%paths'.
    "files": {matching paths},
ERROR BANNED_TERM tools/ck3lens_mcp/server.py:3977:8 [visible_cvids] — Banned term 'visible_cvids' used.
    visible_cvids=cvids if cvids else None
    -> Remove/rename to canonical architecture.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4052:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4052:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4053:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    USE THIS instead of VS Code's grep_search when you need to search files
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4053:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    USE THIS instead of VS Code's grep_search when you need to search files
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4054:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    outside the ck3raven database. Every search is logged for policy validation.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4054:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    outside the ck3raven database. Every search is logged for policy validation.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4055:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4055:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4056:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    In ck3lens mode: Only paths within the active playset (vanilla + mods) are searchable.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4056:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    In ck3lens mode: Only paths within the active playset (vanilla + mods) are searchable.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4057:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    In ck3raven-dev mode: Broader access for infrastructure testing.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4057:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    In ck3raven-dev mode: Broader access for infrastructure testing.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4058:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4058:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4059:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Args:
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4059:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    Args:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4060:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    path: Absolute path to search in (file or directory)
ERROR BANNED_NEAR tools/ck3lens_mcp/server.py:4060:1 — Parallel truth: active mods (near-match) — near-window match ['active', 'mods'] within 6 tokens.
    path: Absolute path to search in (file or directory)
ERROR MUTATOR-02 tools/ck3lens_mcp/server.py:4125:0 — Filesystem write mutator detected outside builder/write-handle modules.
    with open(file_path, 'r', encoding='utf-8', errors='replace') as f:
    -> Route file writes through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:4125:21 [open] — Raw I/O call 'open(...)' outside allowed modules.
    with open(file_path, 'r', encoding='utf-8', errors='replace') as f:
    -> Route I/O through handles minted by WorldAdapter.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4172:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    - ck3raven-dev mode: Defaults to ck3raven repo root (for infrastructure work)
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4173:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    - ck3lens mode: Defaults to vanilla game path
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4174:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4175:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    IMPORTANT: In ck3lens mode, while the default is vanilla, you can explicitly
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4176:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    set base_path to search other allowed paths including ck3raven source
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4177:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    (which is in read_allowed for research purposes). The WorldAdapter validates
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4178:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    all paths against mode visibility rules.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4179:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4180:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    Args:
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4181:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    pattern: Glob pattern to match (e.g., "**/*.txt", "common/traits/*.txt")
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4405:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Get the agent briefing notes for the active playset.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4406:1 — Parallel truth: active mods — matched pattern 'active%mods'.
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4407:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    Agent briefings contain user-written notes that help the AI understand:
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4408:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - Which errors to prioritize vs ignore
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4409:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    - Which conflicts are expected (from compatch mods)
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4792:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "CK3 Lens mode active. You can:\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4792:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "CK3 Lens mode active. You can:\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4793:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "- Search symbols, files, content via database\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4793:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "- Search symbols, files, content via database\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4794:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "- Draft Python scripts in WIP workspace (~/.ck3raven/wip/)\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4794:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "- Draft Python scripts in WIP workspace (~/.ck3raven/wip/)\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4795:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "- Use ck3_repair for launcher/cache issues\n\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4795:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "- Use ck3_repair for launcher/cache issues\n\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4796:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "You CANNOT write to workshop mods, vanilla, or ck3raven source."
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4796:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "You CANNOT write to workshop mods, vanilla, or ck3raven source."
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4797:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    )
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4798:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    elif mode == "ck3raven-dev":
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4798:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    elif mode == "ck3raven-dev":
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4798:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    elif mode == "ck3raven-dev":
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4799:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    return (
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4799:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    return (
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4799:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    return (
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4800:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "CK3 Raven Dev mode active. You can:\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4800:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "CK3 Raven Dev mode active. You can:\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4800:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    "CK3 Raven Dev mode active. You can:\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4801:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "- Read all source code and mods (for parser/ingestion testing)\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4801:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "- Read all source code and mods (for parser/ingestion testing)\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4801:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    "- Read all source code and mods (for parser/ingestion testing)\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4802:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "- Write/edit ck3raven infrastructure code\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4802:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "- Write/edit ck3raven infrastructure code\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4802:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    "- Write/edit ck3raven infrastructure code\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4803:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "- Execute commands via ck3_exec (NOT run_in_terminal)\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4803:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "- Execute commands via ck3_exec (NOT run_in_terminal)\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4803:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    "- Execute commands via ck3_exec (NOT run_in_terminal)\n"
ERROR BANNED_COMPOSITE tools/ck3lens_mcp/server.py:4804:1 — Parallel truth: active mods — matched pattern 'active%mods'.
    "- Write analysis scripts to <repo>/.wip/\n\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4804:1 — Oracle: can_write pattern — matched pattern 'can%write'.
    "- Write analysis scripts to <repo>/.wip/\n\n"
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:4804:1 — Oracle: can_edit pattern — matched pattern 'can%edit'.
    "- Write analysis scripts to <repo>/.wip/\n\n"
ERROR MUTATOR-02 tools/ck3lens_mcp/server.py:5120:0 — Filesystem write mutator detected outside builder/write-handle modules.
    with open(sql_file, 'r', encoding='utf-8') as f:
    -> Route file writes through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:5120:21 [open] — Raw I/O call 'open(...)' outside allowed modules.
    with open(sql_file, 'r', encoding='utf-8') as f:
    -> Route I/O through handles minted by WorldAdapter.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:5126:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:5127:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    # Safety: only allow SELECT
ERROR BANNED_ORACLE tools/ck3lens_mcp/server.py:5128:1 — Oracle: is_allowed pattern — matched pattern 'is%allowed'.
    sql_upper = sql.strip().upper()
ERROR MUTATOR-02 tools/ck3lens_mcp/server.py:5300:0 — Filesystem write mutator detected outside builder/write-handle modules.
    with open(log_file, "a", encoding="utf-8") as log_handle:
    -> Route file writes through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:5300:17 [open] — Raw I/O call 'open(...)' outside allowed modules.
    with open(log_file, "a", encoding="utf-8") as log_handle:
    -> Route I/O through handles minted by WorldAdapter.
ERROR MUTATOR-03 tools/ck3lens_mcp/server.py:5305:0 — Subprocess/system call detected outside builder/write-handle modules.
    proc = subprocess.Popen(
    -> Route side-effecting exec through builder handles only.
ERROR IO-01 tools/ck3lens_mcp/server.py:5305:23 [subprocess.Popen] — Raw I/O call 'subprocess.Popen(...)' outside allowed modules.
    proc = subprocess.Popen(
    -> Route I/O through handles minted by WorldAdapter.
WARN UNUSED-01 tests/test_enforcement.py:20:0 [TestOperationTypes] — Top-level class 'TestOperationTypes' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:60:0 [TestBranchProtection] — Top-level class 'TestBranchProtection' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:102:0 [TestEnforcementRequest] — Top-level class 'TestEnforcementRequest' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:142:0 [TestModeHardGates] — Top-level class 'TestModeHardGates' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:180:0 [TestReadOperations] — Top-level class 'TestReadOperations' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:201:0 [TestContractRequirement] — Top-level class 'TestContractRequirement' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:225:0 [TestAuditLogging] — Top-level class 'TestAuditLogging' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:282:0 [TestCk3FileEnforcement] — Top-level class 'TestCk3FileEnforcement' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:319:0 [TestCk3GitEnforcement] — Top-level class 'TestCk3GitEnforcement' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:362:0 [TestCk3ExecAuditLogging] — Top-level class 'TestCk3ExecAuditLogging' appears unused (no repo references found).
WARN UNUSED-01 tests/test_enforcement.py:386:0 [TestEnforcementDecisionMappings] — Top-level class 'TestEnforcementDecisionMappings' appears unused (no repo references found).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:6:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:6:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:6:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:7:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    Core Invariants:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:7:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Core Invariants:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:7:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Core Invariants:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:8:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    1. Mods must be ingested into the database to be visible
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:8:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    1. Mods must be ingested into the database to be visible
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:8:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    1. Mods must be ingested into the database to be visible
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:9:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    2. Only mods in the active playset are visible by default
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:9:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    2. Only mods in the active playset are visible by default
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:9:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    2. Only mods in the active playset are visible by default
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:10:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    3. Only active local mods are mutable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:10:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    3. Only active local mods are mutable
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:10:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    3. Only active local mods are mutable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:11:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    4. Vanilla and workshop mods are always immutable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:11:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    4. Vanilla and workshop mods are always immutable
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:11:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    4. Vanilla and workshop mods are always immutable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:12:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    5. Filesystem access never expands mod discovery
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:12:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    5. Filesystem access never expands mod discovery
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:12:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    5. Filesystem access never expands mod discovery
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:12:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    5. Filesystem access never expands mod discovery
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:13:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    6. ck3lens cannot write Python except to the WIP workspace
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:13:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    6. ck3lens cannot write Python except to the WIP workspace
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:13:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    6. ck3lens cannot write Python except to the WIP workspace
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:13:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    6. ck3lens cannot write Python except to the WIP workspace
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:14:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    7. ck3raven source is read-only (no writes even with contract)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:14:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    7. ck3raven source is read-only (no writes even with contract)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:14:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    7. ck3raven source is read-only (no writes even with contract)
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:14:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    7. ck3raven source is read-only (no writes even with contract)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:15:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:15:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:15:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:16:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    CRITICAL: ck3lens agents can ONLY edit CK3 mod files in configured local_mods.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:16:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    CRITICAL: ck3lens agents can ONLY edit CK3 mod files in configured local_mods.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:16:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    CRITICAL: ck3lens agents can ONLY edit CK3 mod files in configured local_mods.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:17:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    They CANNOT edit Python code, core ck3raven code, or any infrastructure files
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:17:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    They CANNOT edit Python code, core ck3raven code, or any infrastructure files
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:17:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    They CANNOT edit Python code, core ck3raven code, or any infrastructure files
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:18:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    (except Python in the WIP workspace for temporary scripts).
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:18:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    (except Python in the WIP workspace for temporary scripts).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:19:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    """
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:19:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    """
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:20:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    from __future__ import annotations
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:20:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    from __future__ import annotations
INFO CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:67:0 [CK3LENS_FORBIDDEN_PATHS] — Concept explosion: Lens-like noun 'CK3LENS_FORBIDDEN_PATHS' overlaps Session/WorldAdapter/handles.
    CK3LENS_FORBIDDEN_PATHS = (
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
INFO CONCEPT-01 tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:81:0 [CK3LENS_FORBIDDEN_EXTENSIONS] — Concept explosion: Lens-like noun 'CK3LENS_FORBIDDEN_EXTENSIONS' overlaps Session/WorldAdapter/handles.
    CK3LENS_FORBIDDEN_EXTENSIONS = frozenset({
    -> Do not introduce Lens wrappers. Use Session + WorldAdapter + canonical handles.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:104:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:104:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:105:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    def classify_path_domain(
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:105:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    def classify_path_domain(
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:106:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    path: str | Path,
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:106:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    path: str | Path,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:107:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    *,
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:107:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    *,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:109:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    vanilla_root: str | None = None,
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:109:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    vanilla_root: str | None = None,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:110:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ck3raven_root: Path | None = None,
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:110:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ck3raven_root: Path | None = None,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:111:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ) -> ScopeDomain | None:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:111:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ) -> ScopeDomain | None:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:112:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    """
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:112:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    """
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:113:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Classify a path into its scope domain.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:113:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Classify a path into its scope domain.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:114:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:114:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:115:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Returns the ScopeDomain for structural classification only (NOT permissions).
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:115:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Returns the ScopeDomain for structural classification only (NOT permissions).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:116:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:116:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:118:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    """
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:118:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    """
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:119:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if isinstance(path, str):
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:119:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if isinstance(path, str):
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:120:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    path = Path(path)
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:120:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    path = Path(path)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:121:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:121:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:122:20 — Suspicious .resolve() call on 'path'. Only WorldAdapter (world.resolve()) is allowed.
    path_resolved = path.resolve()
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:131:27 — Suspicious .resolve() call on 'ck3raven_root'. Only WorldAdapter (world.resolve()) is allowed.
    ck3raven_str = str(ck3raven_root.resolve()).replace("\\", "/").lower()
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:138:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if path_str.startswith(vanilla_str):
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:138:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if path_str.startswith(vanilla_str):
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:139:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    return ScopeDomain.VANILLA_GAME
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:139:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    return ScopeDomain.VANILLA_GAME
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:140:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:140:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:143:24 — Suspicious .resolve() call on 'local_mods_folder'. Only WorldAdapter (world.resolve()) is allowed.
    local_str = str(local_mods_folder.resolve()).replace("\\", "/").lower()
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:144:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if path_str.startswith(local_str):
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:144:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if path_str.startswith(local_str):
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:145:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # Mod paths handled by enforcement.py
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:145:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # Mod paths handled by enforcement.py
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:146:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    return None
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:146:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    return None
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:147:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:147:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:181:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ) -> None:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:181:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ) -> None:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:182:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    """
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:182:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    """
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:183:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Enforce: ck3lens agents can ONLY edit CK3 mod files (plus Python in WIP).
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:183:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Enforce: ck3lens agents can ONLY edit CK3 mod files (plus Python in WIP).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:184:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:184:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:185:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Rule: no_python_editing (except WIP), local_mods_only
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:185:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Rule: no_python_editing (except WIP), local_mods_only
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:186:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Severity: ERROR (HARD GATE)
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:186:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Severity: ERROR (HARD GATE)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:187:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:187:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:218:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:218:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:220:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    domain = classify_path_domain(
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:220:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    domain = classify_path_domain(
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:221:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    path,
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:221:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    path,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:223:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    vanilla_root=ctx.vanilla_root,
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:223:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    vanilla_root=ctx.vanilla_root,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:224:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ck3raven_root=ctx.ck3raven_root,
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:224:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ck3raven_root=ctx.ck3raven_root,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:225:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    )
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:225:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    )
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:226:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:226:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN UNUSED-01 tools/ck3lens_mcp/ck3lens/policy/ck3lens_rules.py:774:0 [validate_ck3lens_rules] — Top-level function 'validate_ck3lens_rules' appears unused (no repo references found).
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:313:37 — Suspicious .resolve() call on 'WorldAdapter'. Only WorldAdapter (world.resolve()) is allowed.
    Domain classification happens in WorldAdapter.resolve():
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:426:19 — Suspicious .resolve() call on 'path'. Only WorldAdapter (world.resolve()) is allowed.
    rel_path = path.resolve().relative_to(repo_root.resolve())
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/ck3lens/policy/enforcement.py:426:46 — Suspicious .resolve() call on 'repo_root'. Only WorldAdapter (world.resolve()) is allowed.
    rel_path = path.resolve().relative_to(repo_root.resolve())
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1024:4 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Case 7: No domain or unknown - fallback checks
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1025:4 — Legacy code marker detected. Schedule for removal. (keyword: 'legacy')
    # This handles legacy callers that haven't been updated to pass domain
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1027:8 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Legacy fallback: check target_path format
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1034:8 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Legacy fallback: mod_name + rel_path implies local mod
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/policy/enforcement.py:1160:4 — Architectural workaround detected. (keyword: 'workaround')
    # Check for workaround detection (repeated execution without core changes)
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/policy/types.py:52:0 — Legacy code marker detected. Schedule for removal. (keyword: 'legacy')
    # AcceptanceTest REMOVED - Part of legacy contract schema
WARN UNUSED-01 tools/ck3lens_mcp/ck3lens/policy/types.py:236:0 [get_ck3lens_wip_path] — Top-level function 'get_ck3lens_wip_path' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/ck3lens/policy/types.py:241:0 [get_ck3raven_dev_wip_path] — Top-level function 'get_ck3raven_dev_wip_path' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/ck3lens/policy/types.py:256:0 [WipWorkspaceInfo] — Top-level class 'WipWorkspaceInfo' appears unused (no repo references found).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:337:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    active_roots: Optional[set[str]] = None
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:337:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    active_roots: Optional[set[str]] = None
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:337:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    active_roots: Optional[set[str]] = None
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:338:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    vanilla_root: Optional[str] = None
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:338:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    vanilla_root: Optional[str] = None
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:338:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    vanilla_root: Optional[str] = None
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:339:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:339:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:339:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:342:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:342:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:372:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - vanilla_version_id
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:372:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - vanilla_version_id
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:372:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - vanilla_version_id
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:373:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - active_mod_ids
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:373:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - active_mod_ids
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:373:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - active_mod_ids
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:374:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - active_roots
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:374:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - active_roots
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:374:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - active_roots
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:375:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - vanilla_root
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:375:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - vanilla_root
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:375:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - vanilla_root
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:376:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - local_mods
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:376:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - local_mods
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:376:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - local_mods
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:377:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - ck3raven_root
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:377:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - ck3raven_root
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:377:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - ck3raven_root
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:378:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:378:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:378:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:379:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Returns:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:379:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Returns:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:380:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Self for chaining
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:380:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Self for chaining
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:388:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    if scope.get("active_roots") is not None:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:388:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if scope.get("active_roots") is not None:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:388:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if scope.get("active_roots") is not None:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:389:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    self.active_roots = scope["active_roots"]
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:389:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    self.active_roots = scope["active_roots"]
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:389:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    self.active_roots = scope["active_roots"]
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:390:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    if scope.get("vanilla_root") is not None:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:390:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if scope.get("vanilla_root") is not None:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:390:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if scope.get("vanilla_root") is not None:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:391:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    self.vanilla_root = scope["vanilla_root"]
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:391:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    self.vanilla_root = scope["vanilla_root"]
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:391:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    self.vanilla_root = scope["vanilla_root"]
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:394:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if scope.get("ck3raven_root") is not None:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:394:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if scope.get("ck3raven_root") is not None:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:395:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    self.ck3raven_root = Path(scope["ck3raven_root"])
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:395:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    self.ck3raven_root = Path(scope["ck3raven_root"])
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:396:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    return self
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:396:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    return self
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/policy/types.py:397:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/policy/types.py:397:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN UNUSED-01 tools/ck3lens_mcp/ck3lens/policy/types.py:412:0 [PolicyOutcome] — Top-level class 'PolicyOutcome' appears unused (no repo references found).
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:612:12 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Fallback for raw path when no resolution available
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:615:12 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Fallback for mod addressing when no resolution available
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:632:12 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Fallback for raw path when no resolution available
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:635:12 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Fallback for mod addressing when no resolution available
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/ck3lens/unified_tools.py:706:1 — Suspect fallback logic using visibility — matched pattern 'else%visibility'.
    return {"error": f"File not found: {path}"}
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/ck3lens/unified_tools.py:707:1 — Suspect fallback logic using visibility — matched pattern 'else%visibility'.
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/ck3lens/unified_tools.py:708:1 — Suspect fallback logic using visibility — matched pattern 'else%visibility'.
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:717:4 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # world parameter is REQUIRED - no fallback to banned playset_scope
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:894:8 — Architectural workaround detected. (keyword: 'workaround')
    # Track core source change for WIP workaround detection
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:966:8 — Architectural workaround detected. (keyword: 'workaround')
    # Track core source change for WIP workaround detection
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1188:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    else:
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1188:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    else:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1189:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # Get WorldAdapter for canonical path resolution
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1189:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # Get WorldAdapter for canonical path resolution
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1190:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # Note: WorldAdapter should be pre-initialized; we use mods from session
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1190:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # Note: WorldAdapter should be pre-initialized; we use mods from session
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1191:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    adapter = get_world(
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1191:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    adapter = get_world(
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1193:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    mods=session.mods
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1193:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    mods=session.mods
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1194:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    )
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1194:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    )
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1195:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1195:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/ck3lens/unified_tools.py:1196:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    files = []
WARN SUSPECT_NEAR tools/ck3lens_mcp/ck3lens/unified_tools.py:1196:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    files = []
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/ck3lens/unified_tools.py:1201:30 — Suspicious .resolve() call on 'WorldAdapter'. Only WorldAdapter (world.resolve()) is allowed.
    # Use WorldAdapter.resolve() to get canonical address
WARN SUSPECT_COMMENT tools/ck3lens_mcp/ck3lens/unified_tools.py:1206:28 — Explicit fallback logic detected. Verify architectural compliance. (keyword: 'fallback')
    # Fallback: just use filename
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:3:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:3:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    An MCP server providing CK3 modding tools:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    An MCP server providing CK3 modding tools:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:5:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - Symbol search (from ck3raven SQLite DB)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:5:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - Symbol search (from ck3raven SQLite DB)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:6:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - Conflict detection
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:6:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - Conflict detection
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:8:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - Git operations
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:8:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - Git operations
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:9:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - Validation
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:9:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - Validation
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:10:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:10:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:11:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Architecture:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:11:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Architecture:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:12:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - ALL reads come from ck3raven's SQLite database (symbols, files, AST)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:12:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - ALL reads come from ck3raven's SQLite database (symbols, files, AST)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:14:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    """
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:14:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    """
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:15:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    from __future__ import annotations
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:15:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    from __future__ import annotations
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:16:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    import sys
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:16:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    import sys
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:17:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    import os
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:17:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    import os
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/server.py:217:6 — Suspicious .resolve() call on 'WorldAdapter'. Only WorldAdapter (world.resolve()) is allowed.
    # Use WorldAdapter.resolve() for visibility, enforcement.py for decisions.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:255:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # the error should propagate with a clear message about calling
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:255:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # the error should propagate with a clear message about calling
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:256:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # ck3_get_mode_instructions() first.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:256:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # ck3_get_mode_instructions() first.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:257:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    adapter = get_world(
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:257:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    adapter = get_world(
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:258:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    db=None,  # DB not needed for path resolution - get it when needed
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:258:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    db=None,  # DB not needed for path resolution - get it when needed
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:260:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    mods=session.mods
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:260:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    mods=session.mods
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:261:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    )
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:261:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    )
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:262:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    _cached_world_adapter = adapter
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:262:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    _cached_world_adapter = adapter
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:263:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    _cached_world_mode = mode
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:263:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    _cached_world_mode = mode
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:360:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    vanilla_config = data.get("vanilla", {})
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:360:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    vanilla_config = data.get("vanilla", {})
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:360:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    vanilla_config = data.get("vanilla", {})
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:361:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    vanilla_root = vanilla_config.get("path", "C:/Program Files (x86)/Steam/steamapps/common/Crusader Kings III/game")
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:361:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    vanilla_root = vanilla_config.get("path", "C:/Program Files (x86)/Steam/steamapps/common/Crusader Kings III/game")
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:361:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    vanilla_root = vanilla_config.get("path", "C:/Program Files (x86)/Steam/steamapps/common/Crusader Kings III/game")
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:362:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:362:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:366:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:366:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:367:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # NOTE: No editable_mods list - enforcement.py determines writability at execution time
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:367:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # NOTE: No editable_mods list - enforcement.py determines writability at execution time
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:369:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:369:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:378:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    "vanilla_version_id": None,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:378:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "vanilla_version_id": None,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:378:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "vanilla_version_id": None,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:379:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    "vanilla_root": str(Path(vanilla_root).expanduser()),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:379:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "vanilla_root": str(Path(vanilla_root).expanduser()),
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:379:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "vanilla_root": str(Path(vanilla_root).expanduser()),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:380:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    "source": "json",
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:380:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "source": "json",
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:380:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "source": "json",
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:381:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    "file_path": str(playset_file),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:381:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "file_path": str(playset_file),
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:381:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "file_path": str(playset_file),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:383:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "agent_briefing": agent_briefing,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:383:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "agent_briefing": agent_briefing,
WARN SUSPECT_COMMENT tools/ck3lens_mcp/server.py:392:0 — Legacy code marker detected. Schedule for removal. (keyword: 'legacy')
    # REMOVED: _load_legacy_playset - Legacy playset format BANNED (December 2025)
WARN SUSPECT_COMMENT tools/ck3lens_mcp/server.py:438:4 — Legacy code marker detected. Schedule for removal. (keyword: 'legacy')
    # No playset available - legacy format support REMOVED
WARN UNUSED-01 tools/ck3lens_mcp/server.py:554:0 [ck3_get_instance_info] — Top-level function 'ck3_get_instance_info' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:574:0 [ck3_ping] — Top-level function 'ck3_ping' appears unused (no repo references found).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:597:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:597:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:597:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:598:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    CANONICAL MODEL:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:598:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    CANONICAL MODEL:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:598:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    CANONICAL MODEL:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:599:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - Session is loaded from active playset via load_config()
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:599:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - Session is loaded from active playset via load_config()
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:599:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - Session is loaded from active playset via load_config()
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:600:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - mods[] contains all mods from playset
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:600:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - mods[] contains all mods from playset
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:600:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - mods[] contains all mods from playset
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:603:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:603:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:603:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:604:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Returns session info dict.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:604:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Returns session info dict.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:605:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    """
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:605:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    """
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:606:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    from ck3lens.workspace import load_config
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:606:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    from ck3lens.workspace import load_config
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:642:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "db_path": str(_db.db_path) if _db.db_path else None,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:642:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "db_path": str(_db.db_path) if _db.db_path else None,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:643:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "playset_name": playset_name,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:643:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "playset_name": playset_name,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:644:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "mod_count": mod_count,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:644:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "mod_count": mod_count,
WARN UNUSED-01 tools/ck3lens_mcp/server.py:766:0 [ck3_close_db] — Top-level function 'ck3_close_db' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:822:0 [ck3_db] — Top-level function 'ck3_db' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:893:0 [ck3_db_delete] — Top-level function 'ck3_db_delete' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:1298:0 [ck3_get_policy_status] — Top-level function 'ck3_get_policy_status' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:1342:0 [ck3_logs] — Top-level function 'ck3_logs' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:1437:0 [ck3_conflicts] — Top-level function 'ck3_conflicts' appears unused (no repo references found).
WARN FALLBACK-01 tools/ck3lens_mcp/server.py:1510:0 — Fallback pattern detected - fallbacks often retain banned ideas during refactor.
    # No db_visibility() or visible_cvids - derive inline from mods[]
    -> Review: if this falls back to deprecated visibility/scope patterns, delete it.
WARN UNUSED-01 tools/ck3lens_mcp/server.py:1668:0 [ck3_file] — Top-level function 'ck3_file' appears unused (no repo references found).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1719:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    path: File path (for get/read from filesystem)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1719:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    path: File path (for get/read from filesystem)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1719:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    path: File path (for get/read from filesystem)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1719:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    path: File path (for get/read from filesystem)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1720:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    mod_name: Target for file operations. Can be:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1720:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    mod_name: Target for file operations. Can be:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1720:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    mod_name: Target for file operations. Can be:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1720:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    mod_name: Target for file operations. Can be:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1721:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - "wip" → WIP workspace (~/.ck3raven/wip/) - always writable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1721:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - "wip" → WIP workspace (~/.ck3raven/wip/) - always writable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1721:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    - "wip" → WIP workspace (~/.ck3raven/wip/) - always writable
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1721:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - "wip" → WIP workspace (~/.ck3raven/wip/) - always writable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1722:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    - "vanilla" → Vanilla game files (read-only)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1722:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - "vanilla" → Vanilla game files (read-only)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1722:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    - "vanilla" → Vanilla game files (read-only)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1722:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - "vanilla" → Vanilla game files (read-only)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1724:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    rel_path: Relative path within target
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1724:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    rel_path: Relative path within target
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1724:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    rel_path: Relative path within target
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1724:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    rel_path: Relative path within target
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1725:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    include_ast: Include parsed AST (for get)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1725:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    include_ast: Include parsed AST (for get)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1725:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    include_ast: Include parsed AST (for get)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1725:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    include_ast: Include parsed AST (for get)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1726:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    content: File content (for write)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1726:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    content: File content (for write)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1726:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    content: File content (for write)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1727:1 — Likely drift: active local mods — matched pattern 'active%local%mods'.
    start_line: Start line for read (1-indexed)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:1727:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    start_line: Start line for read (1-indexed)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:1727:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    start_line: Start line for read (1-indexed)
WARN UNUSED-01 tools/ck3lens_mcp/server.py:1784:0 [ck3_folder] — Top-level function 'ck3_folder' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:1861:0 [ck3_playset] — Top-level function 'ck3_playset' appears unused (no repo references found).
WARN SUSPECT_RESOLVE tools/ck3lens_mcp/server.py:2270:55 — Suspicious .resolve() call on 'folder'. Only WorldAdapter (world.resolve()) is allowed.
    mod_path = str(folder.resolve())  # Needed for absolute path
WARN UNUSED-01 tools/ck3lens_mcp/server.py:2370:0 [ck3_git] — Top-level function 'ck3_git' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:2441:0 [ck3_validate] — Top-level function 'ck3_validate' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:2503:0 [ck3_vscode] — Top-level function 'ck3_vscode' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:2559:0 [ck3_repair] — Top-level function 'ck3_repair' appears unused (no repo references found).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2793:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # At this point playset_file is guaranteed to be set (found in loop above)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2793:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # At this point playset_file is guaranteed to be set (found in loop above)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2794:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    assert playset_file is not None
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2794:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    assert playset_file is not None
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2795:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2795:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2796:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # Detect path mismatch
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2796:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # Detect path mismatch
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2799:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2799:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2800:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if not mismatch:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2800:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if not mismatch:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2801:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # Check individual mod paths too
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2801:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # Check individual mod paths too
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2802:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    mods = playset_data.get("mods", [])
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2802:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    mods = playset_data.get("mods", [])
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2810:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    if not mismatch:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2810:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    if not mismatch:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2811:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    return {
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2811:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    return {
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2812:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "success": True,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2812:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "success": True,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2813:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "message": "No path migration needed - paths already match current user profile",
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2813:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "message": "No path migration needed - paths already match current user profile",
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2815:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    }
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2815:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    }
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2816:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2816:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2817:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    old_user, new_user = mismatch
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2817:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    old_user, new_user = mismatch
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:2818:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:2818:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN UNUSED-01 tools/ck3lens_mcp/server.py:2954:0 [ck3_contract] — Top-level function 'ck3_contract' appears unused (no repo references found).
WARN SUSPECT_COMMENT tools/ck3lens_mcp/server.py:3230:8 — Legacy code marker detected. Schedule for removal. (keyword: 'legacy')
    # Move all pre-v1 contracts to legacy folder
WARN UNUSED-01 tools/ck3lens_mcp/server.py:3249:0 [ck3_exec] — Top-level function 'ck3_exec' appears unused (no repo references found).
WARN FALLBACK-01 tools/ck3lens_mcp/server.py:3326:0 — Fallback pattern detected - fallbacks often retain banned ideas during refactor.
    # DB unavailable or not initialized - continue without path visibility checks
    -> Review: if this falls back to deprecated visibility/scope patterns, delete it.
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/server.py:3466:1 — Suspect fallback logic using lens — matched pattern 'else%lens'.
    "output": sandbox_result.get("output", ""),
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/server.py:3467:1 — Suspect fallback logic using lens — matched pattern 'else%lens'.
    "exit_code": 0 if sandbox_result["success"] else 1,
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/server.py:3468:1 — Suspect fallback logic using lens — matched pattern 'else%lens'.
    "policy": {
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/server.py:3469:1 — Suspect fallback logic using lens — matched pattern 'else%lens'.
    "decision": "ALLOW",
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/server.py:3470:1 — Suspect fallback logic using lens — matched pattern 'else%lens'.
    "reason": "Executed in LensWorld sandbox",
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/server.py:3471:1 — Suspect fallback logic using lens — matched pattern 'else%lens'.
    "category": "WIP_SCRIPT_SANDBOXED",
WARN UNUSED-01 tools/ck3lens_mcp/server.py:3710:0 [ck3_token] — Top-level function 'ck3_token' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:3890:0 [ck3_search] — Top-level function 'ck3_search' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4043:0 [ck3_grep_raw] — Top-level function 'ck3_grep_raw' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4160:0 [ck3_file_search] — Top-level function 'ck3_file_search' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4272:0 [ck3_parse_content] — Top-level function 'ck3_parse_content' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4320:0 [ck3_report_validation_issue] — Top-level function 'ck3_report_validation_issue' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4403:0 [ck3_get_agent_briefing] — Top-level function 'ck3_get_agent_briefing' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4455:0 [ck3_search_mods] — Top-level function 'ck3_search_mods' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4547:0 [ck3_get_mode_instructions] — Top-level function 'ck3_get_mode_instructions' appears unused (no repo references found).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4660:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "wip_workspace": wip_info,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4660:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "wip_workspace": wip_info,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4660:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "wip_workspace": wip_info,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4661:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "session_note": _get_mode_session_note(mode),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4661:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "session_note": _get_mode_session_note(mode),
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4661:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "session_note": _get_mode_session_note(mode),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4662:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    # Session info (from what ck3_init_session used to return)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4662:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    # Session info (from what ck3_init_session used to return)
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4662:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    # Session info (from what ck3_init_session used to return)
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4663:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "session": {
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4663:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "session": {
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4663:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "session": {
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4665:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "db_path": session_info.get("db_path"),
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4665:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "db_path": session_info.get("db_path"),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4666:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "playset_id": session_info.get("playset_id"),
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4666:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "playset_id": session_info.get("playset_id"),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4667:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "playset_name": session_info.get("playset_name"),
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4667:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "playset_name": session_info.get("playset_name"),
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4705:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ScopeDomain.CK3RAVEN_SOURCE.value,  # Read OK for error context
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4705:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    ScopeDomain.CK3RAVEN_SOURCE.value,  # Read OK for error context
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4705:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ScopeDomain.CK3RAVEN_SOURCE.value,  # Read OK for error context
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4706:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ScopeDomain.WIP_WORKSPACE.value,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4706:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    ScopeDomain.WIP_WORKSPACE.value,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4706:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ScopeDomain.WIP_WORKSPACE.value,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4707:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ],
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4707:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    ],
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4707:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ],
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4708:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "write_allowed": [
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4708:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "write_allowed": [
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4708:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "write_allowed": [
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4710:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ScopeDomain.WIP_WORKSPACE.value,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4710:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    ScopeDomain.WIP_WORKSPACE.value,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4710:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ScopeDomain.WIP_WORKSPACE.value,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4711:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ],
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4711:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    ],
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4711:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ],
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4712:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "delete_requires_token": [
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4712:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "delete_requires_token": [
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4712:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "delete_requires_token": [
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4714:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ],
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4714:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    ],
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4714:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ],
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4715:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "always_denied": [
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4715:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "always_denied": [
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4717:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "write to VANILLA_GAME",
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4717:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "write to VANILLA_GAME",
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4718:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "write to CK3RAVEN_SOURCE",
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4718:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "write to CK3RAVEN_SOURCE",
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4719:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    ],
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4719:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    ],
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4720:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    },
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4720:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    },
WARN SUSPECT_FALLBACK tools/ck3lens_mcp/server.py:4788:1 — Suspect fallback logic using lens — matched pattern 'else%lens'.
    def _get_mode_session_note(mode: str) -> str:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4792:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "CK3 Lens mode active. You can:\n"
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4793:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "- Search symbols, files, content via database\n"
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4794:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "- Draft Python scripts in WIP workspace (~/.ck3raven/wip/)\n"
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4795:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "- Use ck3_repair for launcher/cache issues\n\n"
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4796:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    "You CANNOT write to workshop mods, vanilla, or ck3raven source."
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4797:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    )
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4798:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    elif mode == "ck3raven-dev":
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4812:0 [ck3_get_detected_mode] — Top-level function 'ck3_get_detected_mode' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:4890:0 [ck3_get_workspace_config] — Top-level function 'ck3_get_workspace_config' appears unused (no repo references found).
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4893:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4893:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4893:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4894:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Use this to understand:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4894:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    Use this to understand:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4894:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Use this to understand:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4895:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - Available modes/tool sets and what tools they enable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4895:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    - Available modes/tool sets and what tools they enable
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4895:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - Available modes/tool sets and what tools they enable
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4896:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - MCP server configuration
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4896:1 — Suspicious: workspace mods registry — matched pattern 'workspace%mods'.
    - MCP server configuration
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4896:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - MCP server configuration
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4898:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    - Database path
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4898:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    - Database path
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4899:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4899:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4900:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Returns:
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4900:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Returns:
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4901:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    Complete workspace configuration
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4901:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    Complete workspace configuration
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4914:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "path": db_path_str,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4914:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "path": db_path_str,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4915:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "exists": db_exists,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4915:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "exists": db_exists,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4916:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    },
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4916:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    },
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4917:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "playset_name": session.playset_name,
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4917:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "playset_name": session.playset_name,
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4919:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "available_modes": [
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4919:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "available_modes": [
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4920:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    {
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4920:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    {
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4921:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "name": "ck3lens",
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4921:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "name": "ck3lens",
WARN SUSPECT_COMPOSITE tools/ck3lens_mcp/server.py:4922:1 — Suspicious: local mods (ensure not a parallel truth) — matched pattern 'local%mods'.
    "description": "CK3 modding - database search, conflict detection, mod editing",
WARN SUSPECT_NEAR tools/ck3lens_mcp/server.py:4922:1 — Suspicious: local mods (near-match) — near-window match ['local', 'mods'] within 6 tokens.
    "description": "CK3 modding - database search, conflict detection, mod editing",
WARN UNUSED-01 tools/ck3lens_mcp/server.py:5059:0 [ck3_db_query] — Top-level function 'ck3_db_query' appears unused (no repo references found).
WARN UNUSED-01 tools/ck3lens_mcp/server.py:5216:0 [ck3_qbuilder] — Top-level function 'ck3_qbuilder' appears unused (no repo references found).


============================================================
STDERR
============================================================
